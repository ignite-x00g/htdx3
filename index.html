<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure AI Chatbot</title>
    <link rel="stylesheet" href="style.css">
    <!-- CSP and other security headers will be added in a later step -->
    <meta http-equiv="Content-Security-Policy"
          content="default-src 'self';
                   script-src 'self' 'unsafe-inline' https://www.google.com https://www.gstatic.com;
                   style-src 'self' 'unsafe-inline';
                   img-src 'self' data:;
                   font-src 'self';
                   frame-src https://www.google.com https://www.gstatic.com;
                   connect-src 'self' ws: wss:;
                   object-src 'none';
                   base-uri 'self';
                   form-action 'self';
                   frame-ancestors 'none';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <!-- Note: For true CORS, headers need to be set server-side.
         CSP's connect-src and frame-ancestors provide some control. -->
</head>
<body>
    <!-- Button to open the chatbot -->
    <button id="open-chatbot-button">Open Chat</button>
    <!-- Chat container follows -->
    <div id="chat-container">
        <div id="chat-header">
            <h2>AI Chatbot</h2>
        </div>
        <div id="chat-messages">
            <!-- Messages will appear here -->
        </div>
        <div id="chat-input-area">
            <div id="recaptcha-placeholder" style="margin-bottom: 10px;">
                <!-- ReCaptcha will be loaded here -->
                <p><em>ReCaptcha placeholder</em></p>
            </div>
            <!-- Honeypot: hidden field for bots -->
            <input type="text" id="honeypot-field" name="honeypot" style="display:none;" aria-hidden="true">

            <input type="text" id="user-input" placeholder="Type your message..." autocomplete="off">
            <button id="send-button">Send</button>
        </div>
    </div>
    <script src="script.js"></script>
    <script>
        // Basic anti-cloning / context menu prevention
        document.addEventListener('contextmenu', event => event.preventDefault());

        // Attempt to prevent Ctrl+S, Ctrl+C, Ctrl+U (less effective, more for deterrence)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && (e.key === 's' || e.key === 'u' || e.key === 'c' || e.key === 'a')) {
                e.preventDefault();
                console.warn('Operation prevented by security policy.');
            }
            // Attempt to prevent F12
            if (e.key === 'F12') {
                e.preventDefault();
                console.warn('Developer tools access prevented.');
            }
        });

        // No-Phishing: Check if the current domain is the expected one (very basic)
        // Replace 'your-expected-domain.com' with the actual domain
        // const expectedDomain = "your-expected-domain.com";
        // if (window.location.hostname !== expectedDomain && window.location.hostname !== "localhost") {
        //     //  window.location.href = "about:blank"; // Or redirect to a safe page
        //     console.warn(`Domain mismatch: current is ${window.location.hostname}, expected ${expectedDomain}. This could be a phishing attempt.`);
        //     // Potentially disable functionality or warn user more prominently.
        //     // Disabling for now as it requires configuration:
        //     document.body.innerHTML = "<h1>Security Alert: Invalid Domain</h1>";
        // }
    </script>
</body>
</html>
